<html>
  <head>
    <!--
      required editor styles
    -->
    <link rel="stylesheet" href="https://unpkg.com/@bpmn-io/form-js@1.15.3/dist/assets/form-js.css">
    <link rel="stylesheet" href="https://unpkg.com/@bpmn-io/form-js@1.15.3/dist/assets/form-js-editor.css">

    <style>
      body, html {
        margin: 0;
        padding: 0;
        font-family: sans-serif;
      }

      #form {
        max-width: 100%;
      }
    </style>
  </head>

  <body>
    <div id="form"></div>

    <!--
      add your form schema to this script tag
      alternatively, load it asynchronously from anywhere
    -->
    <!--
    <script type="application/form-schema">
{"executionPlatform":"Camunda Cloud","executionPlatformVersion":"8.7.0","exporter":{"name":"Camunda Web Modeler","version":"b05b990"},"schemaVersion":18,"id":"Form_DefineScopeAndTermsWithCustomer-0s8syo5","components": [
    {
      "text": "### Business Travel Request",
      "label": "Text view",
      "type": "text",
      "layout": {
        "row": "Row_1ski79f",
        "columns": null
      },
      "id": "Field_0wrpny7"
    },
    {
      "label": "Destination",
      "type": "textfield",
      "layout": {
        "row": "Row_1wqhz20",
        "columns": null
      },
      "id": "Field_1t9i9fo",
      "key": "travelDestination",
      "description": "Customer's location",
      "defaultValue": "Paris"
    },
    {
      "subtype": "date",
      "dateLabel": "Date",
      "label": "Date time",
      "type": "datetime",
      "layout": {
        "row": "Row_0w2o8c1",
        "columns": null
      },
      "id": "Field_0zynihr",
      "key": "travelDate",
      "description": "Date selected by customer"
    },
    {
      "label": "Trip required?",
      "type": "checkbox",
      "layout": {
        "row": "Row_16f2ya9",
        "columns": null
      },
      "id": "Field_04okdj6",
      "key": "tripRequired",
      "description": "If the issue can only be solved onsite",
      "defaultValue": true
    },
    {
      "label": "Notes",
      "type": "textarea",
      "layout": {
        "row": "Row_0ggqifn",
        "columns": null
      },
      "id": "Field_07kchtx",
      "key": "notes"
    }
  ],"type":"default"}
    </script>
  -->

    <script>

      function getQueryParam(name) {
        const params = new URLSearchParams(window.location.search);
        return params.get(name);
      }

      async function loadSchema() {
        const schemaUrl = getQueryParam('json');
        if (schemaUrl) {
          // Fetch schema from URL
          const response = await fetch(schemaUrl);
          return await response.json();
        } else {
          // Fallback to embedded schema
          return JSON.parse(
            document.querySelector('[type="application/form-schema"]').textContent
          );
        }
      }

      const container = document.querySelector('#form');

      loadSchema().then(schema => {
        FormEditor.createFormEditor({
          container,
          schema
        });
      });
    </script>  

    <!--
      required editor script
    -->
    <script src="https://unpkg.com/@bpmn-io/form-js@1.15.3/dist/form-editor.umd.js"></script>
    
  </body>
</html>